

## Домашнее задание No4

### Flask

Разработать интерфейс RESTful API на основе Flask. Интерфейс должен поддерживать методы для поиска фильма по id, по названию и по году выхода, а также выдачу рекомендаций по запросу пользователя.


### Описание Состава проекта


- 2020.JDS.Homework.04.pdf - ТЗ по выполнению домашнего задания
- links. Папка с полезными ссылками и документами
- dbase. Папка с набором инструкций для создания Docker контейнера БД imdb.
- flask_app. Папка с набором инструкций для создания Docker контейнера для web приложения по обработке запросов к БД imdb.
- tests. Папка с тестами работы  контейнеров dbase и flask_app





### Инструкция по работе с тестовой платформой imdb_app.


Возможные сценарии работы:

##### 1. Получение идентификаторов фильмов, удовлетворяющих одному из условий:

- tconst - идентификатор фильма (строковое значение вида tt0259324).  
- titletype - тип фильма (строковое значение),
- primarytitle - название фильма (строковое значение),
- originaltitle - оригинальное название фильма (строковое значение),
- isadult - метка фильма с возрастными ограничениями ( значения True/False),
- startyear - год выхода произведения (значение вида 1984),
- endyear - год окончания показа, если оно было многосерийное  (значение вида 1984),
- runtimeminutes - длительность (значение в минутах),
- genres - список жанров (строковое значение, перечисление через запятую)

Ответ сервиса будет содержать идентификаторы фильмов, либо пустую страницу со статусом 404 в случае его отсутствия. Также возможно ограничение  количества выдачи - по умолчанию установлено значение 10.

Пример запроса :

`curl -i http://127.0.0.1:5000/genres/Documentary,Short&lim=5`

здесь 127.0.0.1:5000 - адрес и порт подключения к сервису, genres - параметр для фильтрации,  Documentary,Short - значение параметра, &lim=5 - ограничение количества выдачи(5, опциональный параметр, может отсутствовать)


Сервис формирует ответ в формате json. Пример ответа сервиса:

```HTTP/1.0 200 OK
Content-Type: application/json
Content-Length: 133
Server: Werkzeug/1.0.1 Python/3.9.0
Date: Wed, 02 Dec 2020 16:10:54 GMT

{"movies":[
                        "tt0000001",
                        "tt0000008",
                        "tt0000010",
                        "tt0000011",
                        "tt0000012",
                        "tt0000013",
                        "tt0000016",
                        "tt0000017",
                        "tt0000022",
                        "tt0000023"
                        ]
}
```

##### 2. Запрос списка рекомендованных фильмов.
Для получения идентификаторов рекомендуемых фильмов требуется сформировать POST-запрос вида:

```yaml
 {"likes": {"tt0000001": 0.6,
            "tt0000002": 0.8,
            "tt00000010": 0
           }
 }
```
по адресу:

`http://138.197.176.123:5000/suggest/top_k`  

Пример запроса к тестовому сервису:

`curl --header "Content-Type: application/json" --request POST  --data '{"likes": {"tt0000001": 0.6, "tt0000002": 0.8,"tt00000010": 0}}' http://138.197.176.123:5000/suggest/15 -i`


Пример запроса к локальному тестовому сервису:

`curl --header "Content-Type: application/json" --request POST  --data '{"likes": {"tt0000001": 0.6, "tt0000002": 0.8,"tt00000010": 0}}' http://127.0.0.1:5000/suggest/15 -i`



где top_k должно быть целым положительным числом, обозначающим требуемое количество рекомендуемых фильмов.Ответ сервиса будет содержать идентификаторы фильмов, либо пустую страницу со статусом 404 в случае его отсутствия.


Сервис формирует ответ в формате json. Пример ответа сервиса:

```yaml
{
    "ratings":[
                        "tt0367882",
                        "tt0120755",
                        "tt0489099",
                        "tt0413267",
                        "tt1735898",
                        "tt0338526",
                        "tt1464540",
                        "tt1234721",
                        "tt2126355",
                        "tt0246460"
    ]
}
```


 
#### TODO





